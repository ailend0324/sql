# 回收宝数据库表结构图

## 🏪 回收宝业务流程图

```
用户想要回收手机
    ↓
1. 创建订单 (订单表)
    ↓
2. 分配渠道 (渠道表)
    ↓
3. 用户邮寄/上门/到店
    ↓
4. 检测工程师检测 (检测表)
    ↓
5. 评估价格 (价格表)
    ↓
6. 用户确认价格
    ↓
7. 完成交易
```

## 📊 主要数据表关系图

### 1. 订单相关表（像购物车一样）

```
订单表 (recycle_t_order)
├── 订单ID (forder_id) ← 主键
├── 订单号 (fseries_number) ← 唯一标识
├── 下单时间 (forder_time)
├── 回收方式 (frecycle_type)
│   ├── 1 = 邮寄
│   ├── 2 = 上门
│   └── 3 = 到店
├── 支付价格 (fpay_out_price)
└── 渠道ID (fchannel_id) → 渠道表
```

### 2. 渠道表（像商店一样）

```
渠道表 (recycle_t_channel)
├── 渠道ID (fchannel_id) ← 主键
├── 渠道名称 (fchannel_name)
│   ├── 闲鱼
│   ├── 天猫
│   ├── 支付宝小程序
│   └── 回收宝APP
└── 项目名称 (fproject_name)
```

### 3. 检测表（像质检员一样）

```
检测记录表 (detection_t_detect_record)
├── 记录ID (frecord_id) ← 主键
├── 序列号 (fserial_number) → 订单表
├── 检测工程师 (freal_name)
├── 产品名称 (fproduct_name)
├── 检测时间 (fend_time)
├── 检测结果 (fverdict)
└── 商品等级 (fgoods_level)
```

### 4. 产品表（像商品目录一样）

```
产品表 (recycle_t_product)
├── 产品ID (fproduct_id) ← 主键
├── 类别ID (fclass_id) → 类别表
└── 品牌ID (fbrand_id) → 品牌表

类别表 (recycle_t_pdt_class)
├── 类别ID (fid) ← 主键
└── 类别名称 (fname)
    ├── 手机
    ├── 平板
    ├── 笔记本
    └── 其他

品牌表 (recycle_t_pdt_brand)
├── 品牌ID (fid) ← 主键
└── 品牌名称 (fname)
    ├── 苹果
    ├── 华为
    ├── 小米
    └── 其他
```

## 🔗 表之间的关系（像朋友关系一样）

### 1. 一对多关系
- **一个渠道** 可以有很多订单
- **一个产品类别** 可以有很多产品
- **一个品牌** 可以有很多产品

### 2. 一对一关系
- **一个订单** 对应一个检测记录
- **一个序列号** 对应一个订单

### 3. 多对多关系
- **订单** 和 **渠道** 通过渠道ID关联
- **产品** 和 **类别** 通过类别ID关联

## 📝 字段命名规则（像密码一样）

### 前缀规则
- `f` = 字段标识符（像身份证号码前面的字母）
- `F` = 大写字段标识符
- `drt_` = 数据仓库表前缀
- `dws_` = 数据服务层前缀

### 常见字段类型
```
时间字段：
- forder_time (订单时间)
- fcreate_dtime (创建时间)
- fend_time (结束时间)

ID字段：
- forder_id (订单ID)
- fchannel_id (渠道ID)
- fproduct_id (产品ID)

状态字段：
- fis_deleted (是否删除：0=否，1=是)
- fdet_type (检测类型)
- fverdict (检测结果)
```

## 🎯 订单号编码规则（像邮政编码一样）

| 订单号前缀 | 业务类型 | 举例 |
|------------|----------|------|
| XY, YJ | 闲鱼订单 | XY20231201001 |
| TM, TY | 天猫订单 | TM20231201002 |
| ZF | 支付宝订单 | ZF20231201003 |
| CG | 外采订单 | CG20231201004 |
| BB | B端帮卖 | BB20231201005 |
| 01, 02 | 验货宝 | 0120231201006 |

## 🏢 仓库编码规则（像门牌号一样）

| 编码 | 仓库名称 | 位置 |
|------|----------|------|
| 0112, 0118 | 东莞仓 | 广东省东莞市 |
| 0201, 0202 | 杭州仓 | 浙江省杭州市 |
| 其他 | 深圳仓 | 广东省深圳市 |

## 💡 简单理解方式

### 1. 订单表 = 购物车
- 记录用户想要回收什么设备
- 记录用户选择什么方式回收
- 记录最终成交价格

### 2. 检测表 = 质检员
- 记录检测工程师是谁
- 记录检测结果如何
- 记录设备质量等级

### 3. 渠道表 = 商店
- 记录用户从哪里来的
- 记录是哪个合作伙伴
- 记录业务类型

### 4. 产品表 = 商品目录
- 记录设备品牌和型号
- 记录设备类别
- 记录设备基本信息

## 🔍 常见查询场景

### 1. 查询某个渠道的订单
```sql
SELECT * FROM 订单表 
WHERE fchannel_id = '闲鱼渠道ID'
```

### 2. 查询某个工程师的检测记录
```sql
SELECT * FROM 检测表 
WHERE freal_name = '张三'
```

### 3. 查询某个时间段的订单
```sql
SELECT * FROM 订单表 
WHERE forder_time >= '2023-12-01'
```

---

**记住**：数据库就像一个大仓库，每个表就像仓库里的不同区域，字段就像每个区域的详细信息，表之间的关系就像区域之间的通道，帮助我们快速找到需要的信息！ 