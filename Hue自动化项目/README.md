# 🚀 Hue查询自动化工具

## 📖 项目简介

这是一个专门为Hue查询工作设计的自动化工具，可以帮助你：
- 自动连接Hue服务器
- 执行复杂的SQL查询
- 优化查询性能
- 自动导出数据和分析

## 🎯 适用场景

- **财务数据分析**：自动执行财务毛利查询
- **定期报表生成**：定时运行查询并导出结果
- **数据质量检查**：自动分析数据完整性和准确性
- **性能优化**：智能优化SQL查询性能

## 📂 项目结构

```
Hue自动化项目/
├── 📖 README.md                    # 项目说明文档（本文件）
├── 🐍 hue_automation.py            # 主程序脚本
├── ⚙️  hue_config.ini              # 配置文件
├── 📦 requirements.txt              # Python依赖包列表
├── 🧠 智能启动.sh                   # 智能启动脚本（推荐）
└── 🔧 配置向导.sh                   # 交互式配置向导
```

## 🚀 快速开始

### 第1步：进入项目目录
```bash
cd Hue自动化项目
```

### 第2步：配置连接信息
```bash
./配置向导.sh
```
按提示输入你的Hue用户名和密码即可！

### 第3步：运行自动化工具
```bash
./智能启动.sh
```

## 🔧 主要功能

### 1. 自动化查询执行
- 自动登录Hue
- 执行SQL查询
- 智能等待结果

### 2. 查询优化
- 分区裁剪优化
- 列裁剪优化
- UNION ALL优化

### 3. 数据导出
- CSV格式导出
- Excel格式导出
- JSON格式导出

### 4. 数据分析
- 数据质量检查
- 统计信息生成
- 报告自动生成

## 📊 输出结果

运行完成后，会在 `exports` 目录下生成：
- 数据文件（CSV、Excel）
- 分析报告
- 总结报告
- 运行日志

## 🛠️ 技术特点

- **Python 3.7+** 开发
- **模块化设计**，易于扩展
- **配置文件驱动**，灵活配置
- **详细日志记录**，便于调试
- **错误处理机制**，稳定可靠

## 🔒 安全说明

- 密码信息存储在配置文件中
- 建议定期更换密码
- 导出文件包含敏感数据，请妥善保管

## 🆘 常见问题

### 问题1：连接失败
**症状**：提示"无法访问登录页面"或"登录失败"

**解决方案**：
1. 检查网络连接
2. 确认Hue服务器地址正确
3. 验证用户名密码
4. 检查Hue服务是否正常运行

### 问题2：查询超时
**症状**：长时间等待没有结果

**解决方案**：
1. 检查SQL查询复杂度
2. 调整 `hue_config.ini` 中的超时时间
3. 检查数据库负载情况

### 问题3：权限不足
**症状**：提示"权限不足"或"访问被拒绝"

**解决方案**：
1. 确认Hue用户有执行查询权限
2. 检查数据库访问权限
3. 联系管理员授权

## 📈 性能优化建议

### 1. 查询优化
- 使用分区字段进行过滤
- 只选择必要的列
- 避免使用 `SELECT *`
- 合理使用 `LIMIT`

### 2. 系统优化
- 调整批处理大小
- 启用查询缓存
- 监控内存使用

### 3. 定期维护
- 清理临时文件
- 检查日志文件大小
- 更新依赖包版本

## 🎨 自定义配置

### 修改导出格式
在 `hue_config.ini` 中：
```ini
[export]
format = excel  # 改为 excel, csv, json
```

### 调整查询设置
```ini
[query]
timeout = 600        # 增加超时时间到10分钟
max_retries = 5     # 增加重试次数
batch_size = 50000  # 增加批处理大小
```

### 优化设置
```ini
[optimization]
max_memory = 4GB    # 增加内存限制
enable_cache = true # 启用缓存
```

## 📞 技术支持

如果遇到问题：

### 1. 查看日志
```bash
# 查看详细日志
tail -f hue_automation.log
```

### 2. 检查配置
```bash
# 验证配置文件
cat hue_config.ini
```

### 3. 测试连接
```bash
# 测试Hue连接
curl -I http://119.23.30.106:8889
```

## 🎉 开始使用

现在你可以：

1. **配置连接信息**：运行 `./配置向导.sh`
2. **运行自动化脚本**：运行 `./智能启动.sh`
3. **查看结果**：检查 `exports` 目录
4. **分析数据**：阅读生成的报告

**祝你使用愉快！** 🚀📊💪

---

**项目维护者**: AI助手  
**最后更新**: 2024年12月  
**适用环境**: Hue 4.x, Python 3.7+
