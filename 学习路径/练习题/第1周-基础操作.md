# 📝 第1周练习题 - SQL基础操作

## 🎯 练习目标
通过实际练习，掌握SQL的基础语法和操作技巧。

**预计时间**：每天30分钟，共7天  
**难度等级**：⭐☆☆☆☆（初级）

---

## 📚 练习前准备

### 1. 确保环境正常
```bash
# 进入项目目录
cd /Users/boxie/SQL

# 打开示例数据库
sqlite3 数据库/school_demo.db

# 查看所有表
.tables
```

### 2. 查看示例数据
```sql
-- 查看学生表结构
.schema students

-- 查看学生数据
SELECT * FROM students;

-- 查看成绩表结构
.schema scores

-- 查看成绩数据
SELECT * FROM scores;
```

---

## 📅 每日练习安排

### Day 1：基础查询练习

#### 练习1：简单查询
```sql
-- 1. 查询所有学生的姓名和年龄
SELECT name, age FROM students;

-- 2. 查询所有学生的姓名、年龄和年级
SELECT name, age, grade FROM students;

-- 3. 查询学生总数
SELECT COUNT(*) FROM students;
```

#### 练习2：条件查询
```sql
-- 1. 查询年龄大于15岁的学生
SELECT * FROM students WHERE age > 15;

-- 2. 查询九年级的学生
SELECT * FROM students WHERE grade = '九年级';

-- 3. 查询年龄在14到16岁之间的学生
SELECT * FROM students WHERE age BETWEEN 14 AND 16;
```

**今日目标**：掌握SELECT和WHERE的基本用法

---

### Day 2：排序和限制练习

#### 练习1：排序查询
```sql
-- 1. 按年龄升序排列所有学生
SELECT * FROM students ORDER BY age;

-- 2. 按年龄降序排列所有学生
SELECT * FROM students ORDER BY age DESC;

-- 3. 先按年级排序，再按年龄排序
SELECT * FROM students ORDER BY grade, age;
```

#### 练习2：限制结果
```sql
-- 1. 查询年龄最大的3名学生
SELECT * FROM students ORDER BY age DESC LIMIT 3;

-- 2. 查询年龄最小的学生
SELECT * FROM students ORDER BY age LIMIT 1;

-- 3. 查询第2到第4名学生（按年龄排序）
SELECT * FROM students ORDER BY age LIMIT 1, 3;
```

**今日目标**：掌握ORDER BY和LIMIT的用法

---

### Day 3：聚合函数练习

#### 练习1：基础统计
```sql
-- 1. 计算学生平均年龄
SELECT AVG(age) FROM students;

-- 2. 找出最大年龄和最小年龄
SELECT MAX(age), MIN(age) FROM students;

-- 3. 计算年龄总和
SELECT SUM(age) FROM students;
```

#### 练习2：分组统计
```sql
-- 1. 按年级统计学生数量
SELECT grade, COUNT(*) FROM students GROUP BY grade;

-- 2. 按年级计算平均年龄
SELECT grade, AVG(age) FROM students GROUP BY grade;

-- 3. 找出每个年级的最大年龄
SELECT grade, MAX(age) FROM students GROUP BY grade;
```

**今日目标**：掌握聚合函数和GROUP BY的用法

---

### Day 4：复杂条件查询

#### 练习1：多条件查询
```sql
-- 1. 查询九年级且年龄大于14岁的学生
SELECT * FROM students WHERE grade = '九年级' AND age > 14;

-- 2. 查询九年级或高一的学生
SELECT * FROM students WHERE grade = '九年级' OR grade = '高一';

-- 3. 查询年龄不是15岁的学生
SELECT * FROM students WHERE age != 15;
```

#### 练习2：模糊查询
```sql
-- 1. 查询姓"小"的学生
SELECT * FROM students WHERE name LIKE '小%';

-- 2. 查询名字中包含"明"的学生
SELECT * FROM students WHERE name LIKE '%明%';

-- 3. 查询名字以"小"结尾的学生
SELECT * FROM students WHERE name LIKE '%小';
```

**今日目标**：掌握复杂条件查询和模糊查询

---

### Day 5：成绩分析练习

#### 练习1：成绩查询
```sql
-- 1. 查询所有数学成绩
SELECT * FROM scores WHERE subject = '数学';

-- 2. 查询成绩大于80分的学生
SELECT * FROM scores WHERE score > 80;

-- 3. 查询数学成绩大于80分的学生
SELECT * FROM scores WHERE subject = '数学' AND score > 80;
```

#### 练习2：成绩统计
```sql
-- 1. 计算数学平均分
SELECT AVG(score) FROM scores WHERE subject = '数学';

-- 2. 按科目统计平均分
SELECT subject, AVG(score) FROM scores GROUP BY subject;

-- 3. 找出每个科目的最高分
SELECT subject, MAX(score) FROM scores GROUP BY subject;
```

**今日目标**：掌握多表数据查询和统计

---

### Day 6：综合练习

#### 练习1：学生成绩分析
```sql
-- 1. 查询每个学生的平均成绩
SELECT student_id, AVG(score) as avg_score 
FROM scores 
GROUP BY student_id;

-- 2. 查询平均成绩大于80分的学生
SELECT student_id, AVG(score) as avg_score 
FROM scores 
GROUP BY student_id 
HAVING AVG(score) > 80;

-- 3. 按平均成绩降序排列，显示前3名
SELECT student_id, AVG(score) as avg_score 
FROM scores 
GROUP BY student_id 
ORDER BY avg_score DESC 
LIMIT 3;
```

#### 练习2：年级分析
```sql
-- 1. 统计每个年级的学生数量
SELECT grade, COUNT(*) as student_count 
FROM students 
GROUP BY grade;

-- 2. 计算每个年级的平均年龄
SELECT grade, AVG(age) as avg_age 
FROM students 
GROUP BY grade;

-- 3. 找出学生数量最多的年级
SELECT grade, COUNT(*) as student_count 
FROM students 
GROUP BY grade 
ORDER BY student_count DESC 
LIMIT 1;
```

**今日目标**：综合运用所学知识

---

### Day 7：实战项目

#### 项目：学生成绩管理系统分析

**任务描述**：假设你是学校的教务主任，需要分析学生的成绩情况。

**分析任务**：

1. **基础统计**
```sql
-- 1. 统计各科目的考试人数
SELECT subject, COUNT(*) as exam_count 
FROM scores 
GROUP BY subject;

-- 2. 计算各科目的平均分、最高分、最低分
SELECT 
    subject,
    AVG(score) as avg_score,
    MAX(score) as max_score,
    MIN(score) as min_score
FROM scores 
GROUP BY subject;
```

2. **成绩分布分析**
```sql
-- 1. 统计各分数段的人数（优秀90+，良好80-89，及格60-79，不及格<60）
SELECT 
    CASE 
        WHEN score >= 90 THEN '优秀'
        WHEN score >= 80 THEN '良好'
        WHEN score >= 60 THEN '及格'
        ELSE '不及格'
    END as grade_level,
    COUNT(*) as student_count
FROM scores 
GROUP BY grade_level;

-- 2. 按科目和成绩等级统计
SELECT 
    subject,
    CASE 
        WHEN score >= 90 THEN '优秀'
        WHEN score >= 80 THEN '良好'
        WHEN score >= 60 THEN '及格'
        ELSE '不及格'
    END as grade_level,
    COUNT(*) as student_count
FROM scores 
GROUP BY subject, grade_level;
```

3. **学生表现分析**
```sql
-- 1. 找出各科目成绩最好的学生
SELECT 
    subject,
    student_id,
    score
FROM scores s1
WHERE score = (
    SELECT MAX(score) 
    FROM scores s2 
    WHERE s2.subject = s1.subject
);

-- 2. 计算每个学生的总分和平均分
SELECT 
    student_id,
    SUM(score) as total_score,
    AVG(score) as avg_score,
    COUNT(*) as subject_count
FROM scores 
GROUP BY student_id;
```

**今日目标**：完成一个完整的数据分析项目

---

## ✅ 练习检查清单

### 基础技能检查
- [ ] 能够使用SELECT查询数据
- [ ] 能够使用WHERE进行条件筛选
- [ ] 能够使用ORDER BY进行排序
- [ ] 能够使用LIMIT限制结果数量
- [ ] 能够使用聚合函数（COUNT、SUM、AVG、MAX、MIN）
- [ ] 能够使用GROUP BY进行分组
- [ ] 能够使用HAVING进行分组后筛选
- [ ] 能够使用LIKE进行模糊查询

### 实战能力检查
- [ ] 能够分析简单的业务数据
- [ ] 能够编写多步骤的复杂查询
- [ ] 能够理解查询结果的业务含义
- [ ] 能够优化查询性能

---

## 🎯 练习建议

### 每日练习流程
1. **复习前一天的内容**（5分钟）
2. **完成当日练习**（20分钟）
3. **尝试扩展练习**（5分钟）

### 扩展练习建议
- 尝试修改查询条件，观察结果变化
- 尝试组合不同的SQL语句
- 尝试分析查询结果的业务含义

### 常见问题解决
- **语法错误**：检查分号、引号、括号
- **逻辑错误**：分步调试，先测试简单查询
- **性能问题**：使用LIMIT限制结果数量

---

## 🚀 下一步学习

完成本周练习后，你将具备：
- 扎实的SQL基础语法
- 基本的数据查询能力
- 简单的数据分析思维

**下一步**：进入第2周，学习更高级的查询技巧！

---

**记住**：练习是掌握SQL的关键，每天保持练习，你一定能成为SQL高手！ 